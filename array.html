<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>array</title>
    <script src="js/jquery-3.3.1.min.js"></script>
    <textarea rows="20" cols="100" id="data_batch" placeholder="textarea"></textarea>
    <button id="btn">button</button>
</head>
<body>
<script type="text/javascript">
    //splice单参测试
    let arr = [1,2,3,4,5,6];
    arr.splice(3);
    console.log(arr);
    //判断是否为数组的三种方法
    let obj={name:"dzz","my-love":'xqr'};
    //方法1，先判断对象typeof obj === 'object'，在用构造函数 obj.constructor === Array：
    if(typeof arr === 'object'){
        if(arr.constructor === Array){
            console.log("arr is array");
        }else{
            console.log("arr is object");
        }
    }else{
        console.log("arr is not object");
    }
    if(typeof obj === 'object'){
        if(obj.constructor === Array){
            console.log("obj is array");
        }else{
            console.log("obj is object");
        }
    }else{
        console.log("obj is not array");
    }
    //方法二，使用,instanceof
    if(arr instanceof Array){
        console.log("arr is array");
    }else{
        console.log("arr is not array");
    }
    if(obj instanceof Array){
        console.log("obj is array");
    }else{
        console.log("obj is not array");
    }
    //方法三：使用Array.isArray(obj);
    if(Array.isArray(arr)){
        console.log("arr is array");
    }else{
        console.log("arr is not array");
    }
    if(Array.isArray(obj)){
        console.log("obj is array");
    }else{
        console.log("obj is not array");
    }

    /*************************/
    console.log("************arr.toString()*************");
    let strArr = [1,2,3,4];
    let arrStr = strArr.toString();
    console.log(arrStr);

    /************搞一个项目的test*************/
    $("#btn").click(function () {
        let data_batch =$("#data_batch").val();
        let data_batch_array = data_batch.split(",");
        console.log(data_batch_array);
        data_batch_array = data_batch_array.map((e)=>{
            if(e) {
                let reg = /[0-9]+/g;
                return reg.exec(e);
            }
        })
        //console.log(data_batch_array);
        let len = data_batch_array.length;
        console.log(data_batch_array);
        len = data_batch_array.length;
        let excel_array = []
        for(let i=0;i<len/7-1;i++){
            let obj = {};
            obj.sn = data_batch_array[i*7][0];
            obj.global_id = (data_batch_array[i*7+3])[0].slice(0,6);
            excel_array.push(obj);
        }
        //data_batch_array,实现了把所有传入的数据搞成了数对的形式
    })

</script>
</body>
</html>
